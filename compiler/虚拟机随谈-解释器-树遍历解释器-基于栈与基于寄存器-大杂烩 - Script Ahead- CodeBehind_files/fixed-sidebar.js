!function(t,e,i){if(void 0===t.csdn&&(t.csdn={}),!jQuery)return!1;t.csdn.fixedSidebar=function(e){function o(){if("right"===r.direction)var e=r.mainBox.offset().left+r.mainBox.width()-i(t).scrollLeft()+parseInt(r.sidebarLeftMargin);else var e=r.mainBox.offset().left-r.sidebar.width()-i(t).scrollLeft()-parseInt(r.sidebarRightMargin);!function(){var o=i(t).scrollTop();r.sidebar.height()>d?(a=r.sidebar.height()-d+a,d=r.sidebar.height()):(a-=d-r.sidebar.height(),d=r.sidebar.height()),a+r.sidebar.height()<=i(t).height()?o>a?r.sidebar.css({position:r.position,top:parseInt(r.top)+"px","z-index":parseInt(r.zIndex),left:e,width:s,bottom:"auto"}):r.sidebar.removeAttr("style"):r.mainBox.height()>r.sidebar.height()?r.targetBox.height()<=i(t).height()&&a-o+r.targetBox.height()<=i(t).height()?r.sidebar.css({position:r.position,bottom:parseInt(r.bottom)+"px","z-index":parseInt(r.zIndex),left:e,width:s,top:"auto"}):r.targetBox.height()>i(t).height()&&a<o&&r.targetBox.height()-a-o<=i(t).height()?r.sidebar.css({position:r.position,bottom:parseInt(r.bottom)+"px","z-index":parseInt(r.zIndex),left:e,width:s,top:"auto"}):r.sidebar.removeAttr("style"):r.sidebar.removeAttr("style"),n=!0}()}var r={targetBox:i(".persion_article"),mainBox:i("main"),sidebar:i("aside"),direction:"right",position:"fixed",top:0,bottom:0,zIndex:99,sidebarRightMargin:8,sidebarLeftMargin:15};e&&i.extend(r,e);var s=r.sidebar.width(),a=r.targetBox.offset().top,n=!0,d=r.sidebar.height();o(),i(t).on("scroll",function(){n&&(setTimeout(o,200),n=!1)}),i(t).on("resize",function(){var e,o=i(t).scrollTop();e="right"===r.direction?r.mainBox.offset().left+r.mainBox.width()-i(t).scrollLeft()+parseInt(r.sidebarLeftMargin):r.mainBox.offset().left-r.sidebar.width()-i(t).scrollLeft()-parseInt(r.sidebarRightMargin),r.mainBox.height()>r.sidebar.height()&&a<o&&a+r.targetBox.height()>=i(t).height()?r.sidebar.css({position:r.position,left:e,bottom:parseInt(r.bottom)+"px","z-index":parseInt(r.zIndex),left:e,width:s,top:"auto"}):a+r.sidebar.height()<=i(t).height()&&o>a?r.sidebar.css({position:r.position,top:parseInt(r.top)+"px","z-index":parseInt(r.zIndex),left:e,width:s,bottom:"auto"}):r.sidebar.removeAttr("style")})}}(window,document,jQuery);